# 주차 헬퍼: 우측 정보 패널 UX/UI 설계 (v3)

## 1. 패널 구조 및 레이아웃

헤더 우측 상단에 '제보'와 '리뷰' 버튼을 추가하고, 그 아래로 '기본 주차 정보' 섹션을 배치합니다.

```
+-------------------------------------------+
| 🚗 파킹 헬퍼      [제보] [리뷰] [X]         |
|===========================================|
|                                           |
|  [장소 이름 (가게 이름)]                     |
|  [카테고리] | [주소]                       |
|                                           |
|-------------------------------------------|
|                                           |
|  [기본 주차 정보]                           |
|  💰 **요금**: 30분 2,000원                 |
|  🅿️ **총 주차면**: 50대                     |
|  🟢 **현재 상태**: 여유 (실시간 정보)        |
|                                           |
|-------------------------------------------|
|                                           |
|  [주차 정보 요약 (리뷰 기반)]                |
|  🚗 "주차 가능성이 높아요"                 |
|                                           |
|-------------------------------------------|
|                                           |
|  [상세 리뷰]                              |
|  ...                                      |
|                                           |
+-------------------------------------------+
```

## 2. 구성 요소 상세

### 헤더 (Header)

- **버튼**: 패널 최상단 우측에 '제보', '리뷰', '닫기' 버튼을 배치하여 사용자가 언제든 쉽게 접근할 수 있도록 합니다.
- **[제보] 버튼**: 클릭 시, 잘못된 정보(요금, 주차면 수 등)를 운영자에게 알릴 수 있는 간단한 폼(form)을 보여줍니다.
- **[리뷰] 버튼**: 클릭 시, 해당 장소의 주차 경험을 작성할 수 있는 리뷰 작성 화면으로 전환됩니다.

### 장소 정보 (Place Info)

- **장소 이름**: 가장 중요한 정보이므로 크고 굵은 폰트로 표시합니다.
- **카테고리/주소**: '음식점', '카페' 등 카테고리와 상세 주소를 작은 폰트로 제공합니다.

### 기본 주차 정보 (Basic Parking Info)

사용자가 가장 궁금해할 객관적인 데이터를 우선적으로 보여줍니다.

- **아이콘 활용**: 각 정보(요금, 주차면 수, 현재 상태) 앞에 직관적인 아이콘(💰, 🅿️, 🟢)을 배치하여 가독성을 높입니다.
- **요금**: 기본 요금, 추가 요금, 일 최대 요금 등 상세 정보를 제공합니다.
- **총 주차면**: 주차장의 규모를 가늠할 수 있는 전체 주차 가능 대수를 표시합니다.
- **현재 상태**: 실시간 정보 연동이 가능하면 '여유', '보통', '혼잡' 등의 상태를 색상과 함께 보여주고, 불가능할 경우 "정보 없음"으로 명확히 표시합니다.

### 주차 정보 요약 (Parking Summary)

- AI가 주차 관련 리뷰들을 분석하여 "주차 가능", "주차 어려움" 등 직관적인 상태를 아이콘(🚗)과 함께 보여줍니다.
- 리뷰에서 추출한 핵심 정보("유료 주차", "발렛 가능")를 짧은 글귀 형태로 노출합니다.

### 상세 리뷰 (Detailed Reviews)

- **필터**: '주차 관련', '긍정/부정' 등 리뷰를 필터링하는 기능을 제공합니다.
- **키워드 하이라이트**: 리뷰 본문 중 '주차', '만차' 등 관련 키워드는 **굵게** 표시하여 가독성을 높입니다.
- **출처 표시**: 리뷰가 어느 플랫폼(네이버, 카카오 등)에서 왔는지 표시합니다。

## 확장 프로그램 팝업 UX/UI 설계

브라우저 상단의 확장 프로그램 아이콘을 클릭했을 때 나타나는 팝업(popup) 화면에 대한 설계입니다. 팝업 화면은 현재 접속한 페이지가 지원되는 지도 서비스인지 아닌지에 따라 두 가지 다른 모습을 보여주어야 합니다.

### 1. Case 1: 지원되는 지도 페이지(네이버/카카오/구글)에 있을 경우

사용자가 현재 지도에서 어떤 장소를 보고 있는지 알려주고, 우측 패널을 열거나 리뷰를 작성하는 등 빠른 액션을 취할 수 있도록 돕습니다.

```text
+--------------------------------------+
| 🚗 파킹 헬퍼 (활성)                |
|======================================|
|                                      |
|  현재 보고 있는 장소:                |
|  "스타벅스 강남R점"                  |
|  (또는 "장소를 선택해주세요")        |
|                                      |
|  +--------------------------------+  |
|  |     주차 정보 상세보기 보기      |  |
|  +--------------------------------+  |
|                                      |
|  +--------------------------------+  |
|  |        이 장소 리뷰하기        |  |
|  +--------------------------------+  |
|                                      |
+--------------------------------------+
```

- **상태 표시**: 헤더에 `(활성)` 표시를 넣어 확장 프로그램이 현재 페이지에서 정상적으로 동작하고 있음을 알려줍니다.
- **현재 장소 표시**: `content.ts`가 감지한 현재 장소의 이름을 표시합니다. 만약 지도만 띄워놓고 특정 장소를 선택하지 않았다면 "장소를 선택해주세요"라는 안내를 보여줍니다.
- **핵심 액션 버튼**:
  - **주차 정보 상세보기 보기**: 가장 중요한 기능으로, 클릭 시 우측 패널을 열어줍니다. (이미 열려있다면 해당 패널로 포커스를 이동)
  - **이 장소 리뷰하기**: 사용자의 정보 기여를 유도하는 버튼으로, 클릭 시 우측 패널의 리뷰 작성 화면을 바로 열어줍니다.

### 2. Case 2: 지원되지 않는 일반 페이지에 있을 경우

## 서비스 기능 보완사항 (v1.1)

'모두의 주차장' 서비스 개선 사례 분석을 통해 다음과 같은 기능 보완사항을 도출합니다.

### 1. 실시간 주차 가능 대수 정보 연동

- **문제점**: 현재 우리 서비스는 주차장의 총 주차 대수 정보만 제공하여, 사용자가 방문 시 실제 주차 가능 여부를 알 수 없습니다.
- **개선 방안**:
    1. **실시간 데이터 API 확보**: 서울시 공공데이터 포털의 '서울시 시영주차장 실시간 주차대수 정보'와 같이 실시간 잔여 대수 정보를 제공하는 API를 추가로 연동합니다.
    2. **DB 스키마 확장**: `parking_lots` 테이블에 `available_spaces` (현재 주차 가능 대수), `last_updated_at` (정보 갱신 시각) 등의 컬럼을 추가합니다.
    3. **API 응답 변경**: `/api/parking-lots` 및 `/api/parking-lots/nearby` API가 응답할 때 실시간 주차 가능 대수와 정보 갱신 시각을 포함하도록 수정합니다.
    4. **데이터 수집 방식 변경**: `collect_public_data.py` 스크립트를 정기적으로 실행하여 최신 정보를 유지하도록 개선하거나, API 요청 시 실시간으로 정보를 가져오는 방식으로 변경합니다.

### 2. '가성비 주차장' 추천 기능 개발

- **문제점**: 사용자가 특정 시간 동안 주차할 경우, 어느 주차장이 가장 저렴한지 직관적으로 알기 어렵습니다.
- **개선 방안**:
    1. **예상 주차 요금 계산 API 개발**:
        - **Endpoint**: `GET /api/parking-lots/calculate-fee`
        - **Request Parameters**: `parking_lot_id`, `start_time`, `end_time`
        - **Response**: `{ "estimated_fee": 5500 }`
        - 주차장의 기본 요금, 추가 요금 정보를 바탕으로 예상 요금을 계산하여 반환합니다.

    2. **'가성비' 점수(Feature Vector) 도입**:
        - 단순 요금 외에 여러 요소를 종합적으로 평가하여 사용자에게 더 나은 선택지를 제공합니다.
        - **평가 요소(Features)**:
            - **예상 요금**: 낮을수록 높은 점수.
            - **거리**: 현재 위치에서 가까울수록 높은 점수.
            - **주차 가능 공간**: 잔여 공간이 많을수록 높은 점수.
            - **운영 시간**: 사용자가 원하는 시간을 포함하여 운영 시간이 길수록 높은 점수.
        - 각 요소에 가중치를 부여하여 종합 점수를 계산하고, 이 점수를 기준으로 주차장을 추천합니다.

    3. **근처 주차장 검색 API 개선**:
        - `GET /api/parking-lots/nearby` API에 `duration` (주차 희망 시간(분)) 파라미터를 추가합니다.
        - API는 거리순 정렬 외에, 해당 시간 동안의 예상 요금순(`sort=fee`) 또는 가성비 점수순(`sort=score`)으로 정렬하는 옵션을 제공합니다.

사용자에게 확장 프로그램의 사용 방법을 안내하고, 지원되는 지도 서비스로 쉽게 이동할 수 있도록 돕습니다.

```text
+--------------------------------------+
| 🚗 파킹 헬퍼                       |
|======================================|
|                                      |
|  지원되는 지도 서비스에서           |
|  주차 정보를 확인하세요!              |
|                                      |
|--------------------------------------|
|                                      |
|  > 네이버 지도로 가기 (링크)         |
|  > 카카오맵으로 가기 (링크)          |
|  > 구글 지도로 가기 (링크)           |
|                                      |
+--------------------------------------+
```

- **안내 메시지**: 확장 프로그램이 어떤 페이지에서 동작하는지 명확하고 친절하게 안내합니다.
- **바로가기 링크**: 사용자가 클릭 한 번으로 지원되는 지도 서비스로 이동할 수 있도록 편의성을 제공합니다.
